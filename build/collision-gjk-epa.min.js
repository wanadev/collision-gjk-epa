!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Collisiongjkepa=t()}}(function(){return function s(i,c,a){function u(e,t){if(!c[e]){if(!i[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=c[e]={exports:{}};i[e][0].call(o.exports,function(t){return u(i[e][1][t]||t)},o,o.exports,s,i,c,a)}return c[e].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)u(a[t]);return u}({1:[function(t,e,r){"use strict";var f=function(t,e,r){this.a=t,this.b=e,this.c=r,this.n=t.constructor.Cross(e.subtract(t),r.subtract(t)).normalize()},n={EPSILON:1e-6,_getNormal:function(t,e,r){var n=t.constructor.Dot,o=n(t,r),s=n(e,r),i=e.scale(o).subtract(t.scale(s));return i.lengthSquared()<this.EPSILON*this.EPSILON?i.scale(0):i.normalize()},_getBarycenter:function(t){for(var e=t[0].constructor.Zero(),r=0;r<t.length;r++)e.addToRef(t[r],e);return e.scaleInPlace(1/t.length,e),e},_getFarthestPointInDirection:function(t,e){for(var r=t[0].constructor.Dot,n=r(t[0],e),o=0,s=1;s<t.length;s++){var i=r(t[s],e);n<i&&(n=i,o=s)}return t[o]},_getNearestEdge:function(t,e){void 0===e&&(e=[]);for(var r,n,o=1/0,s=0;s<t.length;s++){var i=(s+1)%t.length;if(!e.includes(i)){var c=t[s],a=t[i].subtract(c);if(0!==a.lengthSquared()){var u=c,h=this._getNormal(a,u,a);if(0===h.lengthSquared()){h.y=-a.x,h.x=a.y;var l=this._getBarycenter(t),f=c.subtract(l);h.constructor.Dot(h,f)<0&&(h.y=-h.y,h.x=-h.x)}var d=Math.abs(h.constructor.Dot(h,c));d<o&&(o=d,r=i,n=h)}}}return{distance:o,index:r,normal:n}},_getNearestTriangle:function(t,e){void 0===e&&(e=[]);for(var r,n=1/0,o=0;o<t.length;o++)if(!e.includes(o)){var s=t[o],i=Math.abs(s.n.constructor.Dot(s.n,s.a));i<n&&(n=i,r=o)}return{distance:n,index:r}},_containsLine:function(t,e){var r=t[1],n=t[0].subtract(r),o=r.scale(-1);return 0!==n.lengthSquared()?e.copyFrom(this._getNormal(n,o,n)):e.copyFrom(o),!1},_containsTriangle:function(t,e){var r=t[2],n=t[2].constructor.Dot,o=t[1],s=t[0],i=o.subtract(r),c=s.subtract(r),a=r.scale(-1),u=this._getNormal(c,i,i),h=this._getNormal(i,c,c);if(0<n(u,a))t.splice(0,1),e.copyFrom(u);else{if(!(0<n(h,a))){if(void 0===e.z)return!0;var l=t[2].constructor.Cross(i,c);return e.copyFrom(l),n(l,a)<=0&&(t[0]=o,t[1]=s,t[2]=r,e.copyFrom(l.scale(-1))),!1}t.splice(1,1),e.copyFrom(h)}},_containsTetrahedron:function(t,e){var r=t[3],n=r.constructor.Dot,o=r.constructor.Cross,s=t[2],i=t[1],c=t[0],a=s.subtract(r),u=i.subtract(r),h=c.subtract(r),l=r.scale(-1),f=o(a,u),d=o(u,h),g=o(h,a);switch((0<n(f,l)?1:0)|(0<n(d,l)?2:0)|(0<n(g,l)?4:0)){case 1:return this._checkTetrahedron(l,a,u,f,e,t);case 2:return t[2]=i,t[1]=c,this._checkTetrahedron(l,u,h,d,e,t);case 4:return t[1]=s,t[2]=c,this._checkTetrahedron(l,h,a,g,e,t);case 3:return this._checkTwoTetrahedron(l,a,u,f,e,t);case 6:return t[2]=i,t[1]=c,t[0]=s,this._checkTwoTetrahedron(l,u,h,d,e,t);case 5:return t[1]=s,t[2]=c,t[0]=i,this._checkTwoTetrahedron(l,h,a,g,e,t)}return!0},_checkTwoTetrahedron:function(t,e,r,n,o,s){var i=n.constructor.Cross(n,r);if(0<i.constructor.Dot(i,t))return s[2]=s[1],s[1]=s[0],e=s[2].subtract(s[3]),r=s[1].subtract(s[3]),n=e.constructor.Cross(e,r),this._checkTetrahedron(t,e,r,n,o,s);var c=n.constructor.Cross(e,n);return 0<c.constructor.Dot(c,t)?(s.splice(0,2),o.copyFrom(this._getNormal(e,t,e)),!1):void 0},_checkTetrahedron:function(t,e,r,n,o,s){var i=n.constructor.Cross(n,r);if(0<i.constructor.Dot(i,t))return s[2]=s[3],s.splice(3,1),s.splice(0,1),o.copyFrom(this._getNormal(r,t,r)),!1;var c=e.constructor.Cross(e,n);return 0<c.constructor.Dot(c,t)?(s.splice(0,2),o.copyFrom(this._getNormal(e,t,e))):(s.splice(0,1),o.copyFrom(n)),!1},_addEdge:function(t,e){for(var r=0;r<t.length;r++)if(t[r].a===e.b&&t[r].b===e.a)return void t.splice(r,1);t.push(e)},support:function(t,e,r){r.normalize();var n=this._getFarthestPointInDirection(t,r),o=this._getFarthestPointInDirection(e,r.scale(-1));return n.subtract(o)},containsOrigin:function(t,e){return 2===t.length?this._containsLine(t,e):3===t.length?this._containsTriangle(t,e):4===t.length&&this._containsTetrahedron(t,e)},check:function(t,e){var r,n=0,o=[],s=this._getBarycenter(t),i=this._getBarycenter(e),c=s.subtract(i).normalize();if(c.lengthSquared()<this.EPSILON&&(c.x=1),(r=o[0]=this.support(t,e,c)).constructor.Dot(r,c)<=0)return!1;c.scaleInPlace(-1,c);for(var a=e.length*t.length;n<a;){if(0===c.lengthSquared()&&2<=o.length){var u=(c=o[o.length-1].subtract(o[o.length-2])).y;c.y=-c.x,c.x=u}if((r=this.support(t,e,c)).constructor.Dot(r,c)<=0)return!1;if(o.push(r),this.containsOrigin(o,c))return o;n++}},findResponseWithEdge:function(t,e,r,n){void 0===n&&(n=[]);var o=this._getNearestEdge(r,n);if(void 0===o.index)return!1;var s=this.support(t,e,o.normal);return Math.abs(s.constructor.Dot(s,o.normal))-o.distance<=this.EPSILON?(n.push(o.index),o.normal.scale(o.distance)):(r.splice(o.index,0,s),this._updateExceptionsByInsert(n,o.index,r),!1)},findResponseWithTriangle:function(t,e,r,n){if(void 0===n&&(n=[]),0===r.length)return!1;var o=this._getNearestTriangle(r,n);if(void 0===o.index)return!1;var s=r[o.index],i=this.support(t,e,s.n);if(Math.abs(i.constructor.Dot(i,s.n))-o.distance<=this.EPSILON)return n.push(o.index),s.n.scale(o.distance);for(var c=[],a=r.length-1;0<=a;a--)0<(s=r[a]).n.constructor.Dot(s.n,i.subtract(r[a].a))&&(this._addEdge(c,{a:s.a,b:s.b}),this._addEdge(c,{a:s.b,b:s.c}),this._addEdge(c,{a:s.c,b:s.a}),r.splice(a,1),this._removeException(n,a));for(a=0;a<c.length;a++)0!==(s=new f(i,c[a].a,c[a].b)).n.length()&&r.push(s);return!1},_updateExceptionsByInsert:function(t,e,r){for(var n=0;n<t.length;n++)t[n]>=e&&(t[n]=(t[n]+1)%r.length)},_removeException:function(t,e){for(var r=t.length-1;0<=r;r--)t[r]===e?t.splice(r,1):t[r]>e&&t[r]--},getResponse:function(t,e,r){var n=this.getResponses(t,e,r,{maxResponses:1});return n?!!n[0]&&n[0]:n},getResponses:function(t,e,r,n){void 0===n&&(n={}),n=Object.assign({maxResponses:-1},n);for(var o,s=0,i=void 0!==r[0].z?[new f(r[0],r[1],r[2]),new f(r[0],r[2],r[3]),new f(r[0],r[3],r[1]),new f(r[1],r[3],r[2])]:null,c=e.length*t.length,a=[],u=[];s<c&&u.length!==n.maxResponses;){if(o=void 0===r[0].z?this.findResponseWithEdge(t,e,r,a):this.findResponseWithTriangle(t,e,i,a)){var h=o.clone().normalize().scaleInPlace(this.EPSILON),l=o.addToRef(h,o);this._addResponse(u,l)}s++}return u},_addResponse:function(t,e){for(var r=0;r<t.length;r++)if(t[r].subtract(e).lengthSquared()<this.EPSILON)return;t.push(e)},isIntersecting:function(t,e){return!!this.check(t,e)},intersect:function(t,e){var r=this.check(t,e);return!!r&&this.getResponse(t,e,r)},intersectMultiple:function(t,e,r){var n=this.check(t,e);return!!n&&this.getResponses(t,e,n,r)}};e.exports=n},{}]},{},[1])(1)});